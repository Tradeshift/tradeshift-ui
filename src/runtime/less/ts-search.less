.search-mixin-focus-outline(@color: @ts-color-blue) {
	border-color: @color;
	box-shadow: 0 0 0 1px fade(@color, 75%);
}
.search-mixin-hover-outline(@color: @ts-color-blue) {
	.search-mixin-focus-outline(fade(@color, 25%));
}

.ts-search {
	min-width: @ts-unit-double;
	min-height: @ts-unit-double;
	display: inline-block;
	position: relative;
	vertical-align: middle;
	&.ts-inset {
		background-color: @ts-color-white;
		&:after {
			.ts-mixin-maximize();
			content: '';
			border: 1px solid @new-bordercolor;
			border-radius: @ts-unit;
			pointer-events: none;
		}
		&:hover:after {
			.search-mixin-hover-outline();
		}
		&.ts-focus:after,
		&.ts-focus:hover:after {
			.search-mixin-focus-outline();
		}
		&,
		.ts-input {
			border-radius: @ts-unit;
		}
	}
	&.ts-searching,
	&.ts-expanded {
		display: block;
	}
	.ts-input,
	.ts-button-clear {
		position: absolute;
		width: @ts-unit-double;
		height: @ts-unit-double;
		top: 0;
	}
	.ts-input {
		// four IE versions would have four different focus-bugs with <i class="ts-icon-search"> so we'll just use an image :/
		left: 0;
		cursor: text;
		background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AEWDjA79lFiDAAAA+RJREFUWMPNmL1v3GQcx/345fGdE18e3xknlwtCaiSE2BiqUIjUoVsVWMiKEIj+AV0oC6pYCkJIDCBWKnUNEko6sDAgpZQKpE5ELESqavkSn4L9yI5ztp/zw5Kgq/P4Hp/jpH1Gv378e/P3+wBKqfAiL1kQBAEAUPoGRVFWIITriqJckWX5lfFzhJAnaZo+TJJkI03TR2eFo5QKgFJaClDTtE8QQp+rqtoo8/A4jocY4++iKLpDKfXODbDRaHzYbre/LwuWX4SQbDAYfDwcDn+oHRAhtG0Yxtt11BLGeMfzvNVpolkICAAwLMva1TQN1VnwURT5ruteKgtZCDg/P+/x4IIgsOM4/iXXQJfn5uZerwuSCdhqtTY7nc47RfXk+/69MAxvFr0AAGA0m80bnU7nC1mWRdY1nuc98H1/dWpACOFar9fbqqOGAACGYRjbRRHt9/sf8RrnFODi4uIRq1vLfvE0jRbH8bDf7y9O+mBKqSCOzzkWHMZ4pyqcIAiC7/urnuc9yB9XVbXRbDZvcDNxEkFWYxBCMtu2zaqDdjzd3W7XyQcgjuOh4zhNbgQlSVpmda3v+/fOCnf8Is/3/dusKCqKsjLpXvH4wvdYHRuG4c0aZ+BXhJAsfxxCuM4FlGX5VI0dHh7+XUf0crPzISOK17mAEMI38ifSNP2jbumUJMnmKQBRbHEBC9TIRt2AhJAdRorNSoAXtXgqqRBQFMWXLgIwiiK/EqCiKFfrhmE9czQahVzAvCo5Dv21c0jndUZdPuECpmn6a/6ErutLkiQt1wUHADBmZmZeK9PZrAj+VOBDPqsLcHZ29huW/Irj+EcuIKXUwxifGgGmaX7A+xWVWZIkLSOE3meJ3tFo9E+pJgnD8Bbrgna7/TMAwDhLak3T/JMVvSiKvuXdL47Vwv0gCGxGmpFlWbtVIE9Ea5F9YNX+xDGDMV4vqEXU7XYdCOHaNAbfsqzdSR5lYWHht1JqZuyLHrmu+3XRxO/1elsIoe1JD1UUZQUhtL20tPQ7z3jJsizyIJmurowfJoRkR0dHTpIkjyml/6qqeg1CaFYx+ISQbG9v7638dslE416naa8K+YwnYXmJ/f39WyyReS67WAXpFnkq2HGcV1ndPYVItW3bfpNlnMpAlt7dghCuaZr2qa7rV4oMed6qRlH0ZZIk98dm6l+8nYdxs5ZlmVcaMA+rKMpVliSL43hjHKrqns/BwcEWxvjdSoBnFQ1lIIMgsAeDwcsXrqgppZ7rupd4QvW5Sv4ykEmSPJ6qSS4y3SdbdFmWecLz3uUHABi6rt81TfOpaZpPW63W5okw+f9P8iKv/wCR5lHiuuVTsgAAAABJRU5ErkJggg==');
		background-repeat: no-repeat;
		background-position: 11px 10px;
		background-size: 20px 20px;
		background-color: rgba(255, 255, 255, 0.01); // otherwise IE no focus can do
		font-weight: @ts-fontweight !important; // TODO: MOVE TO TABLE COMPONENT(?)
		display: inline-block;
		padding: 0;
		color: @ts-color-black;
		text-indent: 100%;
	}
	.ts-button-clear {
		visibility: hidden;
		margin-right: 0;
		position: absolute;
		right: 0;
	}
	.ts-icon-remove {
		color: @ts-color-slate-lightest;
	}
}
.ts-flex .ts-search .ts-input,
.ts-search:not(.ts-empty) .ts-input,
.ts-search .ts-input:focus,
.ts-search.ts-expanded .ts-input {
	padding: 0 @ts-unit-double 0 @ts-unit-half;
	background-color: @ts-color-white;
	padding-left: @ts-unit-double;
	width: 100%;
	text-indent: 0;
	~ .ts-button-clear {
		visibility: visible;
	}
	~ .ts-button-sort {
		padding-left: @ts-unit-double; // TODO: MOVE TO TABLE COMPONENT!
	}
}
.ts-bg-dark .ts-search .ts-inset:after {
	display: none;
}
.ts-engine-webkit,
.ts-engine-gecko {
	.ts-search {
		.ts-icon-remove:before {
			// strange :/
			top: 0;
			left: 0;
		}
	}
}

// Themes ......................................................................

.ts-bg-red,
.ts-bg-dark,
.ts-bg-blue,
.ts-bg-green,
.ts-bg-purple {
	.ts-search.ts-inset .ts-input {
		box-shadow: none;
	}
}

// Micro search ................................................................

.ts-micro {
	.ts-search {
		min-width: @ts-unit + @ts-unit-half;
		min-height: @ts-unit + @ts-unit-half;
		.ts-button-clear {
			width: @ts-unit + @ts-unit-half;
			height: @ts-unit + @ts-unit-half;
		}
		.ts-input {
			width: @ts-unit + @ts-unit-half;
			height: @ts-unit + @ts-unit-half;
			background-position: 10px 10px;
			background-size: 12px 12px;
		}
		.ts-input:focus {
			width: 100%;
			padding-left: @ts-unit + @ts-unit-quarter;
		}
	}
	:not(.ts-empty) .ts-input {
		width: 100%;
		padding-left: @ts-unit + @ts-unit-quarter;
	}
}
