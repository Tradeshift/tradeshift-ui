// Mixins ......................................................................

.mixin-temp(@selected: pink, @unselected: @ts-white, @bground: @ts-white) {
  .ts-toolbar-tabs {
    .ts-button {
      color: @unselected;
      &:after {
        display: none;
      }
    }
    .ts-selected .ts-button {
      background-color: @bground;
      color: @selected;
    }
  }
}

// Styles both ToolBar, TopBar and TabBar! .....................................

.ts-toolbar {
  .ts-mixin-unselectable();
  .ts-mixin-fixheight(@ts-unit-triple);
  background-color: @ts-lite-liter;
  white-space: nowrap;
  .ts-button {
    margin: 0;
  }
}
.ts-main .ts-toolbar {
  position: relative;
  width: 100%;
}
.ts-toolbar-menu {
  position: absolute;
  font-size: 0;
  white-space: nowrap;
  margin: 0 !important;
  &.ts-left, &.ts-right {
    z-index: 1;
  }
  &.ts-left {
    left: 0;
    &, & > li {
      .ts-mixin-fixheight(@ts-unit-triple);
      .ts-button {
        display: inline-block;
      }
      .ts-action {
        padding-left: 0;
        padding-right: 0;
      }
    }
  }
  &.ts-right {
    right: 0;
    li {
      text-align: right;
      &:first-child {
        padding-left: @ts-unit-half;
      }
      &:last-child {
        padding-right: @ts-unit-half;
      }
    }
  }
  &.ts-left ~ .ts-right {
    li:first-child {
      padding-left: @ts-unit-quarter;
    }
  }
  &.ts-center {
    width: 100%;
    text-align: center;
    > .ts-toolbar-item {
      position: relative;
      z-index: 2;
    }
  }
}
.ts-toolbar-item {
  font-size: @ts-fontsize;
  display: inline-block;
  vertical-align: middle;
  padding: @ts-unit-half @ts-unit-quarter;
  > * {
    margin: 0;
  }
  &.ts-flex {
    .ts-label {
      width: 100%;
    }
    .ts-button {
      &.ts-tertiary, &.ts-secondary, &.ts-primary {
        width: 100%;
      }
    }
  }
}
.ts-toolbar-title, .ts-toolbar-status {
  padding-left: 0;
  padding-right: 0;
  text-overflow: ellipsis;
  &:first-child {
    padding-left: @ts-unit;
  }
  label {
    font-size: @ts-fontsize-big;
    padding: @ts-unit-half;
    padding-left: 0;
    line-height: @ts-unit;
    display: block;
    position: relative;
    top: -1px;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}
.ts-toolbar-status {
  &:first-child {
    padding-left: @ts-unit-plus;
  }
  &:not(:first-child) {
    padding-left: 0 !important;
  }
  label {
    font-size: @ts-fontsize;
    top: 0;
  }
}
.ts-toolbar-search {
  position: relative;
  min-width: @ts-unit-double;
  min-height: @ts-unit-double;
  padding-left: @ts-unit-half;
  padding-right: @ts-unit-half;
  &.ts-flex {
    padding-right: @ts-unit-quarter * 0.5;
  }
  &.ts-searching {
    width: @ts-width-aside;
    padding-right: @ts-unit-half;
    + .ts-toolbar-title {
      display: none;
    }
  }
}
.ts-toolbar .ts-left:only-child {
  .ts-toolbar-search.ts-flex {
    padding-right: @ts-unit-half;
  }
}

// Tabs ........................................................................

.ts-toolbar-tabs {
  position: relative;
  white-space: nowrap;
  margin: 0;
  padding: 0;
  z-index: 2;
  float: left;
  font-size: 0;
  overflow: hidden;
  > * {
    font-size: @ts-fontsize;
  }
  button.ts-button {
    display: inline;
    background-color: lime !important;
  }
  .ts-tab {
    padding: 0;
  }
  .ts-button {
    .ts-mixin-menuitem();
    padding: @ts-unit;
    position: relative;
    margin: 0;
    border-right: 1px solid transparent;
    em {
      background-color: @ts-medium-litest;
      color: @ts-black;
      min-width: 22px;
      text-align: center;
      border-radius: @ts-radius;
      font-size: @ts-fontsize-small;
      font-weight: bold;
      position: absolute;
      right: @ts-unit-half;
      top: 50%;
      z-index: 1;
      margin-top: 0 - 10px;
    }
    &:after {
      content: '';
      border-bottom: 6px solid transparent;
      position: absolute;
      right: 0;
      left: 0;
      bottom: 0;
    }
    &:hover {
      span {
        text-decoration: none;
      }
    }
    .ts-tab-icon {
      cursor: default;
      padding-right: 3px;
    }
    .ts-tab-label {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  }
  li {
    display: inline-block;
    &.ts-counter {
      .ts-button {
        padding-right: @ts-unit-double;
      }
    }
    &.ts-selected {
      .ts-button {
        cursor: default;
        em {
          background-color: @ts-red;
          color: @ts-white;
        }
        &:after {
          border-color: @ts-blue;
        }
        i {
          cursor: pointer;
          margin-left: @ts-unit-quarter;
        }
      }
    }
    &:not(.ts-selected) {
      .ts-button:hover {
        &:after {
          border-color: @ts-blue;
        }
      }
    }
    &.ts-tab-close {
      .ts-button {
        padding-right: 55px;
        .ts-close-bg {
          width: @ts-unit-double;
          height: @ts-unit-double;
          border-radius: 100%;
          text-align: center;
          position: absolute;
          right: @ts-unit-half;
          top: @ts-unit-half;
          &:hover {
            cursor: pointer;
          }
          i {
            line-height: @ts-unit-double;
            margin-left: 0 !important;
          }
        }
      }
    }
  }
}

// Tabs buttons (add new, show more ) ..........................................

.ts-toolbar-tabs {
  li {
    &.ts-tab-button {
      overflow: hidden;
      vertical-align: top;
      padding: 0 !important;
      max-width: @ts-unit-double;
      .ts-button {
        padding: @ts-unit-quarter !important;
        border-right: none !important;
        &:hover {
          &:after {
            border-color: transparent;
          }
        }
        .ts-tab-label {
          max-width: 0;
        }
        i {
          border-radius: 100%;
          display: inline-block !important;
          line-height: @ts-unit-plus;
          .ts-mixin-fix(@ts-unit-plus, @ts-unit-plus);
          .ts-mixin-transition(border-color, @ts-transition-now);
          &.ts-icon-other {
            border-top: 1px solid transparent; // align with buttons
          }
        }
      }
    }
  }
}
.ts-macro {
  .ts-toolbar-tabs {
    li {
      &.ts-tab-button {
        .ts-button i {
          top: @ts-unit-half;
          &.ts-icon-add {
            font-size: 27px;
          }
        }
      }
    }
  }
}
.ts-toolbar {
  &.ts-bg-dark .ts-toolbar-tabs {
    .ts-button {
      color: @ts-lite;
      background-color: @ts-dark-liter;
      border-right-color: @ts-dark-lite;
    }
    .ts-selected .ts-button {
      background-color: @ts-dustblue;
      color: @ts-white;
    }
  }
  &.ts-bg-lite, &.ts-bg-white {
    .mixin-temp(@ts-blue, @ts-medium);
  }
  &.ts-bg-blue {
    .mixin-temp(@ts-blue);
  }
  &.ts-bg-green {
    .mixin-temp(@ts-green);
  }
  &.ts-bg-yellow {
    .mixin-temp(@ts-yellow, @ts-yellow-text, @ts-yellow-text);
  }
  &.ts-bg-orange {
    .mixin-temp(@ts-orange, @ts-orange-text, @ts-orange-text);
  }
  &.ts-bg-red {
    .mixin-temp(@ts-red);
  }
  &.ts-bg-purple {
    .mixin-temp(@ts-purple);
  }
}

// Statusbar ...................................................................

.ts-toolbar {
  &.ts-micro, &.ts-macro {
    .ts-toolbar-item.ts-action:first-child {
      padding-left: @ts-unit;
    }
    /*
		.ts-toolbar-title {
			&:first-child {
				padding-left: @ts-unit-plus;
			}
			&:not(:first-child) {
				padding-left: 0 !important;
			}
			label {
				font-size: @ts-fontsize;
				top: 0;	
			}
		}
		*/
  }
  /*
	&.ts-small {
		&.ts-level-4-5,
		&.ts-level-6,
		&.ts-level-7-5,
		&.ts-level-9 {
			.ts-toolbar-menu {
				display: block;
				width: 100%;
			}
			.ts-left,
			.ts-right {
				position: absolute;
				text-align: center;
				float: none;
			}
			.ts-right {
				bottom: 0;
			}
		}
		&.ts-level-4-5,
		&.ts-level-7-5 {
			.ts-left {
				.ts-toolbar-item {
					padding: 0;
				}
			}
			&.ts-hascenter {
				.ts-left {
					top: @ts-unit-triple - @ts-unit-quarter;
				}
			}
		}
		&.ts-level-4-5 {
			.ts-mixin-fixheight((@ts-unit-triple * 1.5) + @ts-unit-quarter);
		}
		&.ts-level-6 {
			.ts-mixin-fixheight(@ts-unit-triple * 2);
		}
		&.ts-level-7-5 {
			.ts-mixin-fixheight(@ts-unit-triple * 2.5);
		}
		&.ts-level-9 {
			.ts-mixin-fixheight(@ts-unit-triple * 3);
		}
	}
	*/
}

// Micro toolbar ...............................................................

.ts-toolbar.ts-micro {
  .ts-mixin-fixheight(@ts-unit-double);
  .ts-left {
    &, & > li {
      .ts-mixin-fixheight(@ts-unit-double);
      .ts-action {
        height: @ts-unit-plus;
        max-height: @ts-unit-plus;
      }
    }
    .ts-toolbar-item {
      padding: @ts-unit-quarter;
      &.ts-toolbar-title, &.ts-toolbar-status {
        &:first-child {
          padding-left: @ts-unit - @ts-unit-quarter;
        }
        label {
          padding-top: @ts-unit-quarter;
          padding-bottom: @ts-unit-quarter;
          font-size: @ts-fontsize;
        }
      }
      &.ts-toolbar-checkbox {
        padding: 0 !important;
        .ts-button {
          .ts-mixin-fix(@ts-unit-double, @ts-unit-double);
          i {
            &:before {
              font-size: 27px !important;
              top: 2px;
            }
            &.ts-icon-checkboxon, &.ts-icon-checkbox-indeterminate {
              color: @ts-blue;
            }
            &.ts-icon-checkbox {
              color: @ts-medium-litest;
            }
          }
        }
      }
    }
  }
  .ts-toolbar-tabs, .ts-tab {
    .ts-mixin-fixheight(@ts-unit-double);
  }
  .ts-toolbar-tabs {
    .ts-button {
      padding: @ts-unit-half;
      span {
        .ts-mixin-label-text();
      }
      &:after {
        display: none;
      }
    }
  }
  .ts-counter, .ts-tab-close {
    .ts-button {
      padding-right: @ts-unit-double;
    }
  }
  .ts-tab-close {
    .ts-button {
      .ts-close-bg {
        top: 0;
        right: 0;
      }
    }
  }
  .ts-add-tab, .ts-tab-more {
    .ts-button {
      .ts-mixin-fixheight(@ts-unit-double);
    }
  }
}

// Button groups ...............................................................

.ts-toolbar .ts-join .ts-button {
  &, &:after {
    border-radius: 0;
  }
  padding-left: @ts-unit-quarter;
  padding-right: @ts-unit-quarter;
  &:first-child {
    padding-left: @ts-unit-half;
    &, &:after {
      border-radius: @ts-unit 0 0 @ts-unit;
    }
  }
  &:last-child {
    padding-right: @ts-unit-half;
    &, &:after {
      border-radius: 0 @ts-unit @ts-unit 0;
    }
  }
  + .ts-button {
    &:after {
      border-left: 1px solid @ts-white;
    }
    &.ts-tertiary {
      &:after {
        border-left: none;
      }
    }
  }
}

// Before and after Main .......................................................

.ts-toolbar-first, .ts-toolbar-last {
  position: absolute;
  z-index: @ts-zindex-main + 1;
  top: 0;
  left: 0;
  right: 0;
  &:not(.ts-tabbar):after {
    height: 5px;
    width: 100%;
    position: absolute;
    pointer-events: none;
  }
}
.ts-toolbar-first {
  &.ts-bg-lite {
    &:after {
      content: '';
      top: 100%;
      background: linear-gradient(0deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.35));
    }
  }
  &.ts-micro + .ts-toolbar-first {
    top: @ts-unit * 2;
  }
  &.ts-macro + .ts-toolbar-first {
    top: @ts-unit * 3;
  }
}
.ts-toolbar-last {
  top: auto;
  bottom: 0;
  &.ts-bg-lite {
    &:after {
      content: '';
      top: -5px;
      background: linear-gradient(0deg, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0));
    }
  }
}

.ts-has-topbar {
  .ts-toolbar-first {
    top: @ts-unit-triple;
    &.ts-micro + .ts-toolbar-first {
      top: @ts-unit-triple + @ts-unit * 2;
    }
    &.ts-macro + .ts-toolbar-first {
      top: @ts-unit-triple + @ts-unit * 3;
    }
  }
  .ts-toolbar-last {
    top: auto;
    bottom: 0;
  }
}

// Breakpoints .................................................................

.ts-mobile-only {
  &.ts-has-topbar-tabs {
    .ts-toolbar-first {
      top: @ts-unit-triple + @ts-unit-double;
    }
  }
}
.ts-tablet {
  &.ts-has-sidebar-first {
    .ts-toolbar-first, .ts-toolbar-last {
      left: @ts-width-aside;
    }
  }
  &.ts-has-sidebar-last {
    .ts-toolbar-first, .ts-toolbar-last {
      right: @ts-width-aside;
    }
  }
}

// Browsers ....................................................................

.ts-engine-explorer9 {
  .ts-toolbar-first:after {
    border-top: 1px solid rgba(0, 0, 0, 0.35);
    background: none;
  }
  .ts-toolbar-last:after {
    border-bottom: 1px solid rgba(0, 0, 0, 0.35);
    background: none;
  }
}
