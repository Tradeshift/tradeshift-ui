<!DOCTYPE html>
<html lang="en-us" class="ts-docs">

<head>
    <title>Table Edit</title>
    <meta name="viewport" content="width=device-width">
    <script src="//d5wfroyti11sa.cloudfront.net/prod/client/ts-6.1.0-alpha.0.min.js"></script>
    <script src="/dist/assets/dox.min.js"></script>
    <script src="/dist/assets/jquery-2.2.4.min.js"></script>
    <link rel="stylesheet" href="/dist/assets/dox.css">
    <script src="tabs.js"></script>
</head>

<body>
    <header data-ts="TopBar"></header>
    <main data-ts="Main">
        <div data-ts="MainContent">
            <article>
                <h1>Editing the cells</h1>
                <section>
                    <div data-ts="Note">
                        <i class="ts-icon-warning"></i>
                        <p>Editing is a work in progress. This is a developer preview!</p>
                    </div>
                </section>
                <section>
                    <p>We can make the Table <code>editable</code> with a callback that fires on change.</p>
                    <div class="splitscreen-container">
                        <ul class="splitscreen">
                            <li>
                                <figure data-ts="DoxScript" class="runnable" data-ts.code="var%20table%20%3D%20ts.ui.get(&apos;%23table1&apos;)%3B%0Atable.rows(%5B%0A%09%5B&apos;Single%20asterisks%20is%20used%20for%20*italic%20text*&apos;%5D%2C%0A%09%5B&apos;Double%20asterisks%20is%20used%20for%20**strong%20text**&apos;%5D%2C%0A%09%5B&apos;Single%20backtick%20is%20used%20for%20%60monotype%20text%60&apos;%5D%2C%0A%09%5B&apos;Double%20tilde%20can%20be%20used%20to%20~~Strike%20text~~&apos;%5D%0A%5D).editable(function%20onedit(rowindex%2C%20cellindex%2C%20value)%20%7B%0A%09console.log(&apos;Send%20to%20backend%3A%20&apos;%20%2B%20value)%3B%0A%09table.cell(rowindex%2C%20cellindex%2C%20value)%3B%0A%7D)%3B">
                                    <script type="runnable">
                                        var table = ts.ui.get('#table1'); table.rows([ ['Single asterisks is used for *italic text*'], ['Double asterisks is used for **strong text**'], ['Single backtick is used for `monotype text`'], ['Double tilde can be used to ~~Strike text~~'] ]).editable(function
                                        onedit(rowindex, cellindex, value) { console.log('Send to backend: ' + value); table.cell(rowindex, cellindex, value); });
                                    </script><input type="hidden" value="%7B%22show%22%3Atrue%2C%22outs%22%3Afalse%2C%22runs%22%3Atrue%2C%22flip%22%3Afalse%7D">
                                    <div class="tabpanels">
                                        <pre class="prism language-javascript">
<code><span class="token keyword">var</span> table <span class="token operator">=</span> ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;#table1&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">rows<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token string">&apos;Single asterisks is used for *italic text*&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string">&apos;Double asterisks is used for **strong text**&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string">&apos;Single backtick is used for `monotype text`&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string">&apos;Double tilde can be used to ~~Strike text~~&apos;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">editable<span class="token punctuation">(</span></span><span class="token keyword">function</span> <span class="token function">onedit<span class="token punctuation">(</span></span>rowindex<span class="token punctuation">,</span> cellindex<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">&apos;Send to backend: &apos;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	table<span class="token punctuation">.</span><span class="token function">cell<span class="token punctuation">(</span></span>rowindex<span class="token punctuation">,</span> cellindex<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
</pre>
                                    </div>
                                </figure>
                            </li>
                            <li>
                                <div data-ts="Table" id="table1"></div>
                            </li>
                        </ul>
                    </div>
                    <p>All cells are assumed editable unless negated in the column definition.</p>
                    <div class="splitscreen-container">
                        <ul class="splitscreen">
                            <li>
                                <figure data-ts="DoxScript" class="runnable" data-ts.code="ts.ui.get(&apos;%23table6&apos;).cols(%5B%0A%09%7Blabel%3A%20&apos;Edit&apos;%7D%2C%0A%09%7Blabel%3A%20&apos;Edit&apos;%7D%2C%0A%09%7Blabel%3A%20&apos;Don%5C&apos;t%20edit!&apos;%2C%20editable%3A%20false%7D%0A%5D).rows(%5B%0A%09%5B&apos;V&apos;%2C%20&apos;V&apos;%2C%20&apos;X&apos;%5D%0A%5D).editable(function%20onedit(ri%2C%20ci%2C%20value)%20%7B%0A%09this.cell(ri%2C%20ci%2C%20value)%3B%0A%7D)%3B">
                                    <script type="runnable">
                                        ts.ui.get('#table6').cols([ {label: 'Edit'}, {label: 'Edit'}, {label: 'Don\'t edit!', editable: false} ]).rows([ ['V', 'V', 'X'] ]).editable(function onedit(ri, ci, value) { this.cell(ri, ci, value); });
                                    </script><input type="hidden" value="%7B%22show%22%3Atrue%2C%22outs%22%3Afalse%2C%22runs%22%3Atrue%2C%22flip%22%3Afalse%7D">
                                    <div class="tabpanels">
                                        <pre class="prism language-javascript">
<code>ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;#table6&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">cols<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">&apos;Edit&apos;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">&apos;Edit&apos;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">&apos;Don\&apos;t edit!&apos;</span><span class="token punctuation">,</span> editable<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rows<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token string">&apos;V&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;V&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;X&apos;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">editable<span class="token punctuation">(</span></span><span class="token keyword">function</span> <span class="token function">onedit<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cell<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
</pre>
                                    </div>
                                </figure>
                            </li>
                            <li>
                                <div data-ts="Table" id="table6"></div>
                            </li>
                        </ul>
                    </div>
                    <p>If you switch to verbose syntax, you can also disable editing per row.</p>
                    <div class="splitscreen-container">
                        <ul class="splitscreen">
                            <li>
                                <figure data-ts="DoxScript" class="runnable" data-ts.code="ts.ui.get(&apos;%23table7&apos;).rows(%5B%0A%09%7B%20cells%3A%20%5B&apos;X&apos;%2C%20&apos;X&apos;%2C%20&apos;X&apos;%5D%2C%20editable%3A%20false%7D%2C%0A%09%7B%20cells%3A%20%5B&apos;V&apos;%2C%20&apos;V&apos;%2C%20&apos;V&apos;%5D%7D%2C%0A%09%7B%20cells%3A%20%5B&apos;V&apos;%2C%20&apos;V&apos;%2C%20&apos;V&apos;%5D%7D%0A%5D).editable(function%20onedit(ri%2C%20ci%2C%20value)%20%7B%0A%09this.cell(ri%2C%20ci%2C%20value)%3B%0A%7D)%3B">
                                    <script type="runnable">
                                        ts.ui.get('#table7').rows([ { cells: ['X', 'X', 'X'], editable: false}, { cells: ['V', 'V', 'V']}, { cells: ['V', 'V', 'V']} ]).editable(function onedit(ri, ci, value) { this.cell(ri, ci, value); });
                                    </script><input type="hidden" value="%7B%22show%22%3Atrue%2C%22outs%22%3Afalse%2C%22runs%22%3Atrue%2C%22flip%22%3Afalse%7D">
                                    <div class="tabpanels">
                                        <pre class="prism language-javascript">
<code>ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;#table7&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rows<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span> cells<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;X&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;X&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;X&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> editable<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span> cells<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;V&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;V&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;V&apos;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span> cells<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;V&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;V&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;V&apos;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">editable<span class="token punctuation">(</span></span><span class="token keyword">function</span> <span class="token function">onedit<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cell<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
</pre>
                                    </div>
                                </figure>
                            </li>
                            <li>
                                <div data-ts="Table" id="table7"></div>
                            </li>
                        </ul>
                    </div>
                    <p>You can override both columns and rows by specifying <code>editable:true</code> on the individual cells. Again, this would best be done using verbose syntax.</p>
                    <h3><span>Multiline editing</span></h3>
                    <p>You can enter newlines by holding <kbd>SHIFT</kbd> on <kbd>ENTER</kbd>. You will need to enter two newlines to create a paragraph. Note however that we only show the <em>first</em> paragraph unless the column is set to wrap.</p>
                    <div class="splitscreen-container">
                        <ul class="splitscreen">
                            <li>
                                <figure data-ts="DoxScript" class="runnable" data-ts.code="var%20table%20%3D%20ts.ui.get(&apos;%23table8&apos;)%3B%0Avar%20popup%20%3D%20ts.ui.Notification%3B%0Atable.cols(%5B%0A%09%7Blabel%3A%20&apos;Wrapped%20column&apos;%2C%20wrap%3A%20true%7D%2C%0A%09%7Blabel%3A%20&apos;Unwrapped%20column&apos;%7D%0A%5D).rows(%5B%0A%09%5B%0A%09%09&apos;Hold%20%60SHIFT%60%20while%20pressing%20%60ENTER%60%20to%20add%20a%20second%20paragraph.&apos;%2C%0A%09%09&apos;New%20paragraph%20ignored!&apos;%0A%09%5D%0A%5D).editable(function%20onedit(ri%2C%20ci%2C%20value)%20%7B%0A%09table.cell(ri%2C%20ci%2C%20value)%3B%0A%7D)%3B">
                                    <script type="runnable">
                                        var table = ts.ui.get('#table8'); var popup = ts.ui.Notification; table.cols([ {label: 'Wrapped column', wrap: true}, {label: 'Unwrapped column'} ]).rows([ [ 'Hold `SHIFT` while pressing `ENTER` to add a second paragraph.', 'New paragraph ignored!' ]
                                        ]).editable(function onedit(ri, ci, value) { table.cell(ri, ci, value); });
                                    </script><input type="hidden" value="%7B%22show%22%3Atrue%2C%22outs%22%3Afalse%2C%22runs%22%3Atrue%2C%22flip%22%3Afalse%7D">
                                    <div class="tabpanels">
                                        <pre class="prism language-javascript">
<code><span class="token keyword">var</span> table <span class="token operator">=</span> ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;#table8&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> popup <span class="token operator">=</span> ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>Notification<span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">cols<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">&apos;Wrapped column&apos;</span><span class="token punctuation">,</span> wrap<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">&apos;Unwrapped column&apos;</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rows<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span>
		<span class="token string">&apos;Hold `SHIFT` while pressing `ENTER` to add a second paragraph.&apos;</span><span class="token punctuation">,</span>
		<span class="token string">&apos;New paragraph ignored!&apos;</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">editable<span class="token punctuation">(</span></span><span class="token keyword">function</span> <span class="token function">onedit<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	table<span class="token punctuation">.</span><span class="token function">cell<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
</pre>
                                    </div>
                                </figure>
                            </li>
                            <li>
                                <div data-ts="Table" id="table8"></div>
                            </li>
                        </ul>
                    </div>
                    <h3><span>Input validation</span></h3>
                    <p>Note that the actual update is a manual proces. This will give you a break to validate the input. In this example, we&apos;ll show the errors in a Notification.</p>
                    <div class="splitscreen-container">
                        <ul class="splitscreen">
                            <li>
                                <figure data-ts="DoxScript" class="runnable" data-ts.code="var%20table%20%3D%20ts.ui.get(&apos;%23table2&apos;)%3B%0Avar%20popup%20%3D%20ts.ui.Notification%3B%0Atable.rows(%5B%0A%09%5B1%2C%201%2C%202%2C%203%2C%205%5D%2C%0A%09%5B8%2C%2013%2C%2021%2C%2034%2C%2055%5D%0A%5D).editable(function%20onedit(ri%2C%20ci%2C%20value)%20%7B%0A%09value%20%3D%20Number(value)%3B%0A%09if(isNaN(value))%20%7B%0A%09%09table.invalid(ri%2C%20ci)%3B%0A%09%09popup.error(&apos;Please%20type%20a%20number.&apos;%2C%20%7B%0A%09%09%09onaccept%3A%20function()%20%7B%0A%09%09%09%09table.focus(ri%2C%20ci)%3B%0A%09%09%09%7D%0A%09%09%7D)%3B%0A%09%7D%20else%20%7B%0A%09%09console.log(&apos;Send%20to%20backend%3A%20&apos;%20%2B%20value)%3B%0A%09%09table.cell(ri%2C%20ci%2C%20value)%3B%0A%09%7D%0A%7D)%3B">
                                    <script type="runnable">
                                        var table = ts.ui.get('#table2'); var popup = ts.ui.Notification; table.rows([ [1, 1, 2, 3, 5], [8, 13, 21, 34, 55] ]).editable(function onedit(ri, ci, value) { value = Number(value); if(isNaN(value)) { table.invalid(ri, ci); popup.error('Please type
                                        a number.', { onaccept: function() { table.focus(ri, ci); } }); } else { console.log('Send to backend: ' + value); table.cell(ri, ci, value); } });
                                    </script><input type="hidden" value="%7B%22show%22%3Atrue%2C%22outs%22%3Afalse%2C%22runs%22%3Atrue%2C%22flip%22%3Afalse%7D">
                                    <div class="tabpanels">
                                        <pre class="prism language-javascript">
<code><span class="token keyword">var</span> table <span class="token operator">=</span> ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;#table2&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> popup <span class="token operator">=</span> ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>Notification<span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">rows<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">editable<span class="token punctuation">(</span></span><span class="token keyword">function</span> <span class="token function">onedit<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	value <span class="token operator">=</span> <span class="token function">Number<span class="token punctuation">(</span></span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNaN<span class="token punctuation">(</span></span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		table<span class="token punctuation">.</span><span class="token function">invalid<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">)</span><span class="token punctuation">;</span>
		popup<span class="token punctuation">.</span><span class="token function">error<span class="token punctuation">(</span></span><span class="token string">&apos;Please type a number.&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			onaccept<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				table<span class="token punctuation">.</span><span class="token function">focus<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">&apos;Send to backend: &apos;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		table<span class="token punctuation">.</span><span class="token function">cell<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
</pre>
                                    </div>
                                </figure>
                            </li>
                            <li>
                                <div data-ts="Table" id="table2"></div>
                            </li>
                        </ul>
                    </div>
                    <p>We can report the errors in a less annoying way if we pass a string as we mark the cells <code>invalid</code>. The message will show in the <a data-ts="Button" href="/dist/components/table/status.html">statubar</a> when the cell is
                        focused. We&apos;ll also initialize the statusbar with an empty string so that it doesn&apos;t awkwardly pop into existance.</p>
                    <div class="splitscreen-container">
                        <ul class="splitscreen">
                            <li>
                                <figure data-ts="DoxScript" class="runnable" data-ts.code="function%20format(value)%20%7B%0A%09return%20new%20Date(value).toDateString()%3B%0A%7D%0Afunction%20valid(value)%20%7B%0A%09return%20!isNaN(new%20Date(value).getTime())%3B%0A%7D%0Avar%20table%20%3D%20ts.ui.get(&apos;%23table3&apos;)%3B%0Atable.status(&apos;&apos;).rows(%5B%0A%09%5B%7B%20value%3A%20&apos;1985-10-26&apos;%2C%20text%3A%20format(&apos;1985-10-26&apos;)%20%7D%5D%2C%0A%09%5B%7B%20value%3A%20&apos;2015-10-21&apos;%2C%20text%3A%20format(&apos;2015-10-26&apos;)%20%7D%5D%2C%0A%09%5B%7B%20value%3A%20&apos;1955-11-12&apos;%2C%20text%3A%20format(&apos;1955-11-12&apos;)%20%7D%5D%0A%5D).editable(function%20onedit(ri%2C%20ci%2C%20value)%20%7B%0A%09if(valid(value))%20%7B%0A%09%09console.log(&apos;Send%20to%20backend%3A%20&apos;%20%2B%20value)%3B%0A%09%09table.cell(ri%2C%20ci%2C%20%7B%0A%09%09%09value%3A%20value%2C%0A%09%09%09text%3A%20format(value)%2C%0A%09%09%7D)%3B%0A%09%7D%20else%20%7B%0A%09%09var%20message%20%3D%20&apos;Please%20use%20the%20format%20*YYYY-MM-DD*&apos;%3B%0A%09%09table.invalid(ri%2C%20ci%2C%20message)%3B%0A%09%7D%0A%7D)%3B">
                                    <script type="runnable">
                                        function format(value) { return new Date(value).toDateString(); } function valid(value) { return !isNaN(new Date(value).getTime()); } var table = ts.ui.get('#table3'); table.status('').rows([ [{ value: '1985-10-26', text: format('1985-10-26') }], [{ value:
                                        '2015-10-21', text: format('2015-10-26') }], [{ value: '1955-11-12', text: format('1955-11-12') }] ]).editable(function onedit(ri, ci, value) { if(valid(value)) { console.log('Send to backend: ' + value); table.cell(ri,
                                        ci, { value: value, text: format(value), }); } else { var message = 'Please use the format *YYYY-MM-DD*'; table.invalid(ri, ci, message); } });
                                    </script><input type="hidden" value="%7B%22show%22%3Atrue%2C%22outs%22%3Afalse%2C%22runs%22%3Atrue%2C%22flip%22%3Afalse%7D">
                                    <div class="tabpanels">
                                        <pre class="prism language-javascript">
<code><span class="token keyword">function</span> <span class="token function">format<span class="token punctuation">(</span></span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">valid<span class="token punctuation">(</span></span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">isNaN<span class="token punctuation">(</span></span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> table <span class="token operator">=</span> ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;#table3&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">status<span class="token punctuation">(</span></span><span class="token string">&apos;&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rows<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">&apos;1985-10-26&apos;</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token function">format<span class="token punctuation">(</span></span><span class="token string">&apos;1985-10-26&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">&apos;2015-10-21&apos;</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token function">format<span class="token punctuation">(</span></span><span class="token string">&apos;2015-10-26&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">&apos;1955-11-12&apos;</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token function">format<span class="token punctuation">(</span></span><span class="token string">&apos;1955-11-12&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">editable<span class="token punctuation">(</span></span><span class="token keyword">function</span> <span class="token function">onedit<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">valid<span class="token punctuation">(</span></span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">&apos;Send to backend: &apos;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		table<span class="token punctuation">.</span><span class="token function">cell<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> <span class="token punctuation">{</span>
			value<span class="token punctuation">:</span> value<span class="token punctuation">,</span>
			text<span class="token punctuation">:</span> <span class="token function">format<span class="token punctuation">(</span></span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&apos;Please use the format *YYYY-MM-DD*&apos;</span><span class="token punctuation">;</span>
		table<span class="token punctuation">.</span><span class="token function">invalid<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
</pre>
                                    </div>
                                </figure>
                            </li>
                            <li>
                                <div data-ts="Table" id="table3"></div>
                            </li>
                        </ul>
                    </div>
                    <p>When the cell is eventually updated, it automatically becomes valid. Let&apos;s talk more about the difference between <code>text</code> and <code>value</code> in the example above.</p>
                    <h3><span>Text versus value</span></h3>
                    <p>It doesn&apos;t always matter, but it&apos;s important to note that we <em>edit the value</em> while we <em>show the text</em>. Here&apos;s another example to illustrate the difference.</p>
                    <div class="splitscreen-container">
                        <ul class="splitscreen">
                            <li>
                                <figure data-ts="DoxScript" class="runnable" data-ts.code="ts.ui.get(&apos;%23table4&apos;).rows(%5B%0A%09%5B%0A%09%09%7B%20value%3A%201000%2C%20text%3A%20&apos;%241%2C000.00&apos;%7D%2C%0A%09%09%7B%20value%3A%202000%2C%20text%3A%20&apos;%242%2C000.00&apos;%7D%2C%0A%09%09%7B%20value%3A%203000%2C%20text%3A%20&apos;%243%2C000.00&apos;%7D%0A%09%5D%0A%5D).editable()%3B">
                                    <script type="runnable">
                                        ts.ui.get('#table4').rows([ [ { value: 1000, text: '$1,000.00'}, { value: 2000, text: '$2,000.00'}, { value: 3000, text: '$3,000.00'} ] ]).editable();
                                    </script><input type="hidden" value="%7B%22show%22%3Atrue%2C%22outs%22%3Afalse%2C%22runs%22%3Atrue%2C%22flip%22%3Afalse%7D">
                                    <div class="tabpanels">
                                        <pre class="prism language-javascript">
<code>ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;#table4&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rows<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span>
		<span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token string">&apos;$1,000.00&apos;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token string">&apos;$2,000.00&apos;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">3000</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token string">&apos;$3,000.00&apos;</span><span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">editable<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
</pre>
                                    </div>
                                </figure>
                            </li>
                            <li>
                                <div data-ts="Table" id="table4"></div>
                            </li>
                        </ul>
                    </div>
                    <p>This way, we can edit, validate and persist the data in a uniform format (in this case, JavaScript numbers) while displaying a regionalized or otherwise customized format. We can exploit this creatively, by editing a document ID and
                        showing the document title, for example. Remember to update verbosely:</p>
                    <figure data-ts="DoxScript" data-ts.code="table.cell(rowindex%2C%20cellindex%2C%20%7B%0A%09text%3A%20&apos;4%2C000.00&apos;%2C%0A%09value%3A%204000%0A%7D)%3B">
                        <input type="hidden" value="%7B%22show%22%3Afalse%2C%22outs%22%3Afalse%2C%22runs%22%3Afalse%2C%22flip%22%3Afalse%7D">
                        <div class="tabpanels">
                            <pre class="prism language-javascript">
<code>table<span class="token punctuation">.</span><span class="token function">cell<span class="token punctuation">(</span></span>rowindex<span class="token punctuation">,</span> cellindex<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	text<span class="token punctuation">:</span> <span class="token string">&apos;4,000.00&apos;</span><span class="token punctuation">,</span>
	value<span class="token punctuation">:</span> <span class="token number">4000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
</pre>
                        </div>
                    </figure>
                    <p>&#x2014; because otherwise the text becomes identical to the value. Also note that the <code>editable</code> callback will always serve the value as a string, so it may be nescessary to convert it to a number. Here&apos;s the more
                        complete example.</p>
                    <div class="splitscreen-container">
                        <ul class="splitscreen">
                            <li>
                                <figure data-ts="DoxScript" class="runnable" data-ts.code="function%20format(n)%20%7B%0A%09return%20&apos;%24&apos;%20%2B%20n.toFixed(2).replace(%2F%5CB(%3F%3D(%5Cd%7B3%7D)%2B(%3F!%5Cd))%2Fg%2C%20%22%2C%22)%0A%7D%0Avar%20table%20%3D%20ts.ui.get(&apos;%23table5&apos;)%3B%0Atable.rows(%5B%0A%09%5B%0A%09%09%7B%20value%3A%201000%2C%20text%3A%20format(1000)%7D%2C%0A%09%09%7B%20value%3A%202000%2C%20text%3A%20format(2000)%7D%2C%0A%09%09%7B%20value%3A%203000%2C%20text%3A%20format(1000)%7D%0A%09%5D%0A%5D).editable(function(ri%2C%20ci%2C%20value)%20%7B%0A%09value%20%3D%20Number(value)%3B%0A%09if(isNaN(value))%20%7B%0A%09%09table.invalid(ri%2C%20ci)%3B%0A%09%7D%20else%20%7B%0A%09%09table.cell(ri%2C%20ci%2C%20%7Bvalue%3A%20value%2C%20text%3A%20format(value)%7D)%3B%0A%09%7D%0A%7D)%3B">
                                    <script type="runnable">
                                        function format(n) { return '$' + n.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",") } var table = ts.ui.get('#table5'); table.rows([ [ { value: 1000, text: format(1000)}, { value: 2000, text: format(2000)}, { value: 3000, text: format(1000)} ] ]).editable(function(ri,
                                        ci, value) { value = Number(value); if(isNaN(value)) { table.invalid(ri, ci); } else { table.cell(ri, ci, {value: value, text: format(value)}); } });
                                    </script><input type="hidden" value="%7B%22show%22%3Atrue%2C%22outs%22%3Afalse%2C%22runs%22%3Atrue%2C%22flip%22%3Afalse%7D">
                                    <div class="tabpanels">
                                        <pre class="prism language-javascript">
<code><span class="token keyword">function</span> <span class="token function">format<span class="token punctuation">(</span></span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token string">&apos;$&apos;</span> <span class="token operator">+</span> n<span class="token punctuation">.</span><span class="token function">toFixed<span class="token punctuation">(</span></span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace<span class="token punctuation">(</span></span><span class="token regex">/\B(?=(\d{3})+(?!\d))/g</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> table <span class="token operator">=</span> ts<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;#table5&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">rows<span class="token punctuation">(</span></span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span>
		<span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token function">format<span class="token punctuation">(</span></span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token function">format<span class="token punctuation">(</span></span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">3000</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token function">format<span class="token punctuation">(</span></span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">editable<span class="token punctuation">(</span></span><span class="token keyword">function</span><span class="token punctuation">(</span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	value <span class="token operator">=</span> <span class="token function">Number<span class="token punctuation">(</span></span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNaN<span class="token punctuation">(</span></span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		table<span class="token punctuation">.</span><span class="token function">invalid<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		table<span class="token punctuation">.</span><span class="token function">cell<span class="token punctuation">(</span></span>ri<span class="token punctuation">,</span> ci<span class="token punctuation">,</span> <span class="token punctuation">{</span>value<span class="token punctuation">:</span> value<span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token function">format<span class="token punctuation">(</span></span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
</pre>
                                    </div>
                                </figure>
                            </li>
                            <li>
                                <div data-ts="Table" id="table5"></div>
                            </li>
                        </ul>
                    </div>
                </section>
                <section>
                    <p>Here&apos;s an overview of the editing related features.</p>
                    <div data-ts="DoxApi" data-ts.code="%7B%0A%09name%3A%20%22ts.ui.TableSpirit%22%2C%0A%09methods%3A%20%5B%0A%09%09%7B%0A%09%09%09name%3A%20%22editable%22%2C%0A%09%09%09args%3A%20%5B%22(function)%22%5D%2C%0A%09%09%09desc%3A%20%22Make%20the%20Table%20editable%20with%20an%20optional%20callback%20that%20triggers%20whenever%20something%20is%20changed.%20The%20callback%20gets%20assigned%20to%20the%20Tables%20%60onedit%60%20method%2C%20see%20below.%22%0A%09%09%7D%2C%0A%09%09%7B%0A%09%09%09name%3A%20%22onedit%22%2C%0A%09%09%09args%3A%20%5B%22number%22%2C%20%22number%22%2C%20%22string%22%2C%20%22string%22%5D%2C%0A%09%09%09desc%3A%20%22Called%20whenever%20a%20cell%20changes%20value%20with%20arguments%3A%20rowindex%2C%20cellindex%2C%20newvalue%2C%20oldvalue.%22%0A%09%09%7D%2C%0A%09%09%7B%0A%09%09%09name%3A%20%22uneditable%22%2C%0A%09%09%09desc%3A%20%22Make%20the%20Table%20not%20editable.%22%0A%09%09%7D%2C%0A%09%09%7B%0A%09%09%09name%3A%20%22invalid%22%2C%0A%09%09%09args%3A%20%5B%22number%22%2C%20%22number%22%5D%2C%0A%09%09%09desc%3A%20%22Mark%20the%20cell%20at%20given%20rowindex%20and%20cellindex%20invalid%22%0A%09%09%7D%2C%0A%09%09%7B%0A%09%09%09name%3A%20%22valid%22%2C%0A%09%09%09args%3A%20%5B%22number%22%2C%20%22number%22%5D%2C%0A%09%09%09desc%3A%20%22Mark%20the%20cell%20at%20given%20rowindex%20and%20cellindex%20valid.%20When%20you%20update%20the%20cell%20(see%20below)%2C%20the%20cell%20automatically%20becomes%20valid.%22%0A%09%09%7D%2C%0A%09%09%7B%0A%09%09%09name%3A%20%22cell%22%2C%0A%09%09%09args%3A%20%5B%22number%22%2C%20%22number%22%2C%20%22string%7Cnumber%7Cobject%22%5D%2C%0A%09%09%09desc%3A%20%22Update%20the%20cell%20at%20given%20rowindex%20and%20cellindex.%20Use%20the%20object%20argument%20(verbose%20syntax)%20to%20maintain%20both%20%60text%60%20and%20%60value%60.%22%0A%09%09%7D%2C%0A%09%09%7B%0A%09%09%09name%3A%20%22focus%22%2C%0A%09%09%09args%3A%20%5B%22number%22%2C%20%22number%22%5D%2C%0A%09%09%09desc%3A%20%22Focus%20the%20cell%20(textarea)%20at%20given%20rowindex%20and%20cellindex.%22%0A%09%09%7D%2C%0A%09%09%7B%0A%09%09%09name%3A%20%22blur%22%2C%0A%09%09%09args%3A%20%5B%22number%22%2C%20%22number%22%5D%2C%0A%09%09%09desc%3A%20%22Blur%20the%20cell%20at%20given%20rowindex%20and%20cellindex.%22%0A%09%09%7D%0A%09%5D%0A%7D">
                    </div>
                </section>
                <section>
                    <div data-ts="Note">
                        <i class="ts-icon-todo"></i>
                        <p>API for knowing when something is invalid / everything is valid.</p>
                    </div>
                    <div data-ts="Note">
                        <i class="ts-icon-todo"></i>
                        <p>How to visually differentiate editable versus non-editable cells?</p>
                    </div>
                </section>
            </article>
        </div>
    </main>
</body>

</html>